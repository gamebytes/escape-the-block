(function(){var t,e,n,r,a,i,o,s,c,l,y,u,f,h;h=800,a=200,c="#3498db",e="#e74c3c",l=3.5,r=10,n=1,u=0,i="",o=["Give up.","You'll never win.","Stop trying.","You can never beat your high score!","Try reaching 30 seconds noob.","Wow, you're pretty bad at this game."],f=null,s=null,t=!0,y=function(t){return 1===t?t+" second":t+" seconds"},Crafty.init(h,a),Crafty.scene("Loading",function(){return Crafty.load(["../../music/background.wav"],function(){return Crafty.bind("KeyDown",function(e){return 77===e.key?t?(t=!1,Crafty.audio.stop()):(t=!0,Crafty.audio.play("background",-1,1)):void 0}),Crafty.audio.add("background","../../music/background.wav"),t&&Crafty.audio.play("background",-1,1),Crafty.scene("MainMenu")}),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().text("Loading...").attr({w:600,h:300,x:h/2-300,y:a/2-15})}),Crafty.scene("MainMenu",function(){return Crafty.e("2D, DOM, HTML").css({color:"white","pointer-events":"none",padding:"16px","text-align":"center"}).attr({w:h,h:a,x:0,y:0}).replace("<style>\n    h1 {\n        text-align: center;\n    }\n</style>\n<h1>Escape the Block!</h1>\n<p>Press p to start playing or i for instructions!</p>").requires("Keyboard").bind("KeyDown",function(){return this.isDown(73)?Crafty.scene("Instructions"):this.isDown(80)?Crafty.scene("Game"):void 0})}),Crafty.scene("Instructions",function(){return Crafty.e("2D, DOM, HTML").css({color:"white","pointer-events":"none",padding:"16px"}).attr({w:h,h:a,x:0,y:0}).requires("Keyboard").bind("KeyDown",function(){return this.isDown(80)?Crafty.scene("Game"):void 0}).replace("<style>\n    h1 {\n        font-size: 24px;\n    }\n    ul {\n        list-style: none;\n        margin-left: 20px;\n        padding-left: 1em;\n        text-indent: -1em;\n        font-size: 14px;\n    }\n    li {\n        margin: 5px 0;\n    }\n</style>\n<h1>Instructions</h1>\n<ul>\n    <li>&#8594; Don't let the red guy touch you!</li>\n    <li>&#8594; Jump with the &#8593; arrow.</li>\n    <li>&#8594; Try to last as long as possible!</li>\n    <li>&#8594; Press m to mute!</li>\n</ul>\n<p>Press p to start playing!</p>")}),Crafty.scene("Game",function(){var t,C,x,d,p,w,g,v;return Crafty.background("black"),f=setInterval(function(){return u++},1e3),s=setInterval(function(){var t;return t=Math.floor(Math.random()*(o.length-0+1)),i=o[t]},4e3),Crafty.c("Floor",{init:function(){return this.requires("2D, Canvas, Collision, Gravity, Color"),this.color("white")}}),Crafty.c("Object",{init:function(){return this.requires("2D, Canvas, Gravity, Color"),this.gravity("Floor")}}),Crafty.c("Player",{init:function(){return this.requires("Object, Collision, Multiway"),this.multiway(l,{UP_ARROW:-90}),this.color(c)}}),Crafty.c("Enemy",{speed:r,init:function(){return this.requires("Object, Collision"),this.color(e),this.bind("EnterFrame",function(){return this.x-=this.speed,this.x<0?(this.x=h-60,this.speed+=n):void 0}),this.onHit("Player",function(){return Crafty.scene("EndGame")})}}),g=Crafty.e("Player").attr({w:20,h:20,x:60,y:a-40}),d=Crafty.e("Enemy").attr({w:20,h:20,x:h+20,y:a-40}),p=Crafty.e("Floor").attr({w:h,h:20,x:0,y:a-20}),w=Crafty.e("2D, Canvas, Color").color("white").attr({w:20,h:a,x:0,y:0}),v=Crafty.e("2D, Canvas, Color").color("white").attr({w:20,h:a,x:h-20,y:0}),t=Crafty.e("2D, Canvas, Color").color("white").attr({w:h,h:20,x:0,y:0}),C=Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().bind("EnterFrame",function(){return this.text(i)}).attr({w:600,h:300,x:h/2-300,y:a/2-15}),x=Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().bind("EnterFrame",function(){return this.text(y(u))}).attr({w:600,h:300,x:h/2-300,y:a/2-50})}),Crafty.scene("EndGame",function(){return null===Crafty.storage("score")?Crafty.storage("score",""+u):u>Crafty.storage("score")&&(Crafty.storage.remove("score"),Crafty.storage("score",""+u)),Crafty.background("#e74c3c"),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"20px"}).unselectable().text("You survived "+y(u)+"!").attr({w:500,h:300,x:h/2-250,y:a/2-50}),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"20px"}).unselectable().text("Your high score is "+y(parseInt(Crafty.storage("score")))+"!").attr({w:600,h:300,x:h/2-300,y:a/2}),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().text("Press space to play again!").requires("Keyboard").bind("KeyDown",function(){return this.isDown("SPACE")?(u=0,clearInterval(f),clearInterval(s),i="",Crafty.scene("Game")):void 0}).attr({w:500,h:300,x:h/2-250,y:a/2+50})}),Crafty.scene("Loading")}).call(this);